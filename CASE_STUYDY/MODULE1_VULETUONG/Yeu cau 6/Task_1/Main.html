<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="Customer.js"></script>
    <title>Main</title>
</head>
<body>
<script>
    let regexCmnd =  /^[\d]{8,8}$/;
    let regexBirthday = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
    let regexEmail = /\S+@\S+\.\S+/;
    let listCustomer = [];
    function displayMainMenu() {
        let choose = parseInt(prompt("1. Add New Customer"+"\n"+"2. Display Customer Information"
            + "\n" +"3. Display total pay of Customer"  + "\n" + "4. Edit Customer Infomation"+ "\n" + "5. Delete Customer"  + "\n" + "6. Exit"
        ));
        switch (choose) {
            case 1:
                addNewCustomer();
                break;
            case 3:
                displayTotalPayCustomer();
                break;
            default: {
                alert("Failded");
            }
        }
    }

    function displayTotalPayCustomer() {
        let temp = "";
        for( let i=0; i<listCustomer.length; i++){
            temp += i + ".Name: " + listCustomer[i].getName() + "\n";
        }
        let chooseDisplay = parseInt( prompt("Please choose a custumer you want to show total pay" +
                "\n" + temp ));
        alert("Total pay of the customer is:" + listCustomer[chooseDisplay].totalPay());

    }
    function addNewCustomer() {
        let checkValid = false;
        let cus = new Customer();
        let name = prompt("Input Name: " );
        let cmnd;
        let birthday;
        let email;
        do{
            cmnd = prompt("Input cmnd: ");
            if(regexCmnd.test(cmnd)){
                checkValid=true;
            }else {
                alert("Invalid ID Card Number, please input again.");
            }
        }while (!checkValid)
        checkValid=false;

        do{
            birthday = prompt("Input birthday: ");
            if(regexBirthday.test(birthday)){
                checkValid = true;
            }else {
                alert("Invalid birthday, please input again.");
            }
        }while (!checkValid)
        checkValid = false;

        do {
            email = prompt("Input Email: ");
            if(regexEmail.test(email)){
                checkValid= true;
            }else{
                alert("Invalid email, please input again.");
            }
        }while (!checkValid)
        checkValid = false;

        let address = prompt("Input Address: ");
        let typeService = prompt("Input typeService: ");
        let typeRoom = prompt("Input typeRoom: ");
        let typeCustomer = prompt("Input typeCustomer: ");
        let discount = prompt("Input Discount: ");
        let quantityIncluded = prompt("Input quantityIncluded: ");
        let rentDays = prompt("Input rentDays: ");
        cus.setName(name);
        cus.setCMND(cmnd);
        cus.setBirthday(birthday);
        cus.setEmail(email);
        cus.setAddress(address);
        cus.setTypeService(typeService);
        cus.setTypeRoom(typeRoom);
        cus.setTypeCustomer(typeCustomer);
        cus.setDiscount(discount);
        cus.setQuantityIncluded(quantityIncluded);
        cus.setRentDays(rentDays);

        listCustomer.push(cus);
        alert("You have successfully added.");
        displayMainMenu();
    }
    displayMainMenu();

</script>
</body>
</html>